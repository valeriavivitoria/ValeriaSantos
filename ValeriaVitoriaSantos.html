<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco de Dados Local</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #008000;
            text-align: center;
            margin: 0;
            padding: 20px;
        }
        form {
            background: #FFB6C1;
            padding: 20px;
            border-radius: 10px;
            border: 3px solid #800000;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            margin: auto;
        }
        input, button {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 1px solid #800000;
            border-radius: 5px;
        }
        button {
            cursor: pointer;
        }
        .btn-salvar {
            background-color: #28a745;
            color: white;
            border: none;
        }
        .btn-salvar:hover {
            background-color: #218838;
        }
        .btn-cancelar {
            background-color: #dc3545;
            color: white;
            border: none;
        }
        .btn-cancelar:hover {
            background-color: #c82333;
        }
        .btn-limpar {
            background-color: #ff0000;
            color: white;
            border: none;
        }
        .btn-limpar:hover {
            background-color: #cc0000;
        }
        ul {
            list-style: none;
            padding: 0;
        }
        li {
            background: white;
            margin: 5px auto;
            padding: 10px;
            border-radius: 5px;
            max-width: 400px;
            border: 2px solid #800000;
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <h2>Cadastro de Pessoas</h2>
    <form id="formPessoa">
        <input type="text" id="nome" placeholder="Nome" required>
        <input type="text" id="cpf" placeholder="CPF" required>
        <input type="date" id="dataNascimento" required>
        <input type="text" id="nomeMae" placeholder="Nome da Mãe">
        <input type="text" id="nomePai" placeholder="Nome do Pai">
        <input type="text" id="cep" placeholder="CEP">
        <input type="text" id="endereco" placeholder="Endereço">
        <input type="text" id="bairro" placeholder="Bairro">
        <input type="text" id="cidade" placeholder="Cidade">
        <input type="text" id="estado" placeholder="Estado">
        <button type="submit" class="btn-salvar">Salvar</button>
        <button type="button" class="btn-cancelar" onclick="cancelarCadastro()">Cancelar</button>
        <button type="button" class="btn-limpar" onclick="limparBanco()">Limpar Tudo</button>
    </form>
    <h3>Lista de Pessoas</h3>
    <ul id="listaPessoas"></ul>

    <script>
        let db;
        const request = indexedDB.open("MeuBanco", 1);

        request.onupgradeneeded = function(event) {
            db = event.target.result;
            if (!db.objectStoreNames.contains("pessoas")) {
                db.createObjectStore("pessoas", { keyPath: "cpf" });
            }
        };

        request.onsuccess = function(event) {
            db = event.target.result;
            carregarPessoas();
        };

        document.getElementById("formPessoa").onsubmit = function(event) {
            event.preventDefault();
            const pessoa = {
                cpf: document.getElementById("cpf").value,
                nome: document.getElementById("nome").value,
                dataNascimento: document.getElementById("dataNascimento").value,
                nomeMae: document.getElementById("nomeMae").value,
                nomePai: document.getElementById("nomePai").value,
                cep: document.getElementById("cep").value,
                endereco: document.getElementById("endereco").value,
                bairro: document.getElementById("bairro").value,
                cidade: document.getElementById("cidade").value,
                estado: document.getElementById("estado").value
            };
            salvarPessoa(pessoa);
        };

        function salvarPessoa(pessoa) {
            const transaction = db.transaction(["pessoas"], "readwrite");
            const store = transaction.objectStore("pessoas");
            store.put(pessoa);
            transaction.oncomplete = () => carregarPessoas();
        }

        function carregarPessoas() {
            const transaction = db.transaction(["pessoas"], "readonly");
            const store = transaction.objectStore("pessoas");
            const request = store.getAll();
            request.onsuccess = function() {
                const lista = document.getElementById("listaPessoas");
                lista.innerHTML = "";
                request.result.forEach(pessoa => {
                    const li = document.createElement("li");
                    li.textContent = `${pessoa.nome} - ${pessoa.cpf}`;
                    lista.appendChild(li);
                });
            };
        }

        function cancelarCadastro() {
            document.getElementById("formPessoa").reset();
        }

        function limparBanco() {
            const transaction = db.transaction(["pessoas"], "readwrite");
            const store = transaction.objectStore("pessoas");
            const request = store.clear();
            request.onsuccess = function() {
                carregarPessoas();
                alert("Todos os cadastros foram removidos!");
            };
        }
    </script>
</body>
</html>
